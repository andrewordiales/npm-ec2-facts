#!/usr/bin/env node

var lib = require('..');

lib.configs(function(configs) {

  var fact = new lib.Fact(configs);

  var ec2mdCallback = function(metaData, value) {
    fact.save(metaData, value);
  }

  lib.ec2md.getEc2Data('ami-id', '/meta-data/ami-id', ec2mdCallback);
  lib.ec2md.getEc2Data('ami-launch-index', '/meta-data/ami-launch-index', ec2mdCallback);
  lib.ec2md.getEc2Data('availability-zone', '/meta-data/placement/availability-zone', ec2mdCallback);
  lib.ec2md.getEc2Data('instance-id', '/meta-data/instance-id', ec2mdCallback);
  lib.ec2md.getEc2Data('instance-type', '/meta-data/instance-type', ec2mdCallback);
  lib.ec2md.getEc2Data('public-hostname', '/meta-data/public-hostname', ec2mdCallback);
  lib.ec2md.getEc2Data('public-ipv4', '/meta-data/public-ipv4', ec2mdCallback);

  lib.ec2md.getEc2Data('user-data', '/user-data', ec2mdCallback);

});
